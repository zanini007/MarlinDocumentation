<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <meta name="flattr:id" content="e7nqg5"/> <title>Bed Leveling (Unified) | Marlin Firmware</title> <meta name="generator" content="Jekyll v3.8.5"/> <meta property="og:title" content="Bed Leveling (Unified)"/> <meta name="author" content="MarlinFirmware"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Printing the planet, one layer at a time."/> <meta property="og:description" content="Printing the planet, one layer at a time."/> <link rel="canonical" href="https://marlinfw.org/docs/gcode/G029-ubl.html"/> <meta property="og:url" content="https://marlinfw.org/docs/gcode/G029-ubl.html"/> <meta property="og:site_name" content="Marlin Firmware"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2020-03-10T16:40:10-05:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Bed Leveling (Unified)"/> <meta name="twitter:site" content="@MarlinFirmware"/> <meta name="twitter:creator" content="@MarlinFirmware"/> <script type="application/ld+json">
{"headline":"Bed Leveling (Unified)","dateModified":"2020-03-10T16:40:10-05:00","datePublished":"2020-03-10T16:40:10-05:00","url":"https://marlinfw.org/docs/gcode/G029-ubl.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://marlinfw.org/docs/gcode/G029-ubl.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"MarlinFirmware"},"author":{"@type":"Person","name":"MarlinFirmware"},"description":"Printing the planet, one layer at a time.","@type":"BlogPosting","@context":"https://schema.org"}</script> <link rel="icon" href="/assets/favicon.ico"/> <link rel="stylesheet" href="/assets/stylesheets/main.css"/> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'marlinfw.org')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/font-awesome.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/search.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <a href="/" class="navbar-brand"> <img id="mflogo" src="/assets/images/logo/marlin/text.png" alt="Marlin" height="40"/> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li><a href="/docs/basics/introduction.html">About Marlin</a></li> <li><a href="/meta/download/">Download</a></li> <li><a href="/docs/configuration/configuration.html">Configure</a></li> <li><a href="/docs/basics/install.html">Install</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">K-Factor Calibration Pattern</a></li> <li class="divider"></li> <li><a href="https://github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"></li> <li><a href="https://github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Help <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/configuration/configuration.html">Configuring Marlin</a></li> <li><a href="/docs/configuration/laser_spindle.html">Laser/Spindle Configuration</a></li> <li><a href="/docs/configuration/probes.html">Probe Configuration</a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/development/boards.html">Boards</a></li> <li class="divider"></li> <li><a href="/docs/development/coding_standards.html">Coding Standards</a></li> <li><a href="/docs/development/getting_started_pull_requests.html">Contributing Code with Pull Requests</a></li> <li><a href="/docs/development/git_scripts.html">Marlin Github Scripts</a></li> <li class="divider"></li> <li><a href="/docs/development/contributing.html">Contributing to Marlin</a></li> <li><a href="/docs/development/feature_request.html">Feature requests</a></li> <li class="divider"></li> <li><a href="/docs/development/fonts.html">Adding new fonts</a></li> <li><a href="/docs/development/lcd_language.html">LCD Language System</a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></li> <li><a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></li> <li class="divider"></li> <li><a href="/docs/features/autostart.html">Autostart</a></li> <li class="divider"></li> <li><a href="/docs/features/eeprom.html">EEPROM</a></li> <li class="divider"></li> <li><a href="/docs/features/fwretract.html">Firmware Retract</a></li> <li><a href="/docs/features/lin_advance.html">Linear Advance</a></li> <li><a href="/docs/features/probe_temp_compensation.html">Probe Temperature Compensation</a></li> <li class="divider"></li> <li><a href="/docs/features/lcd_menu.html">LCD Menu Tree</a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/gcode/G000-G001.html"> <strong>G0-G1</strong>: Linear Move </a></li> <li><a href="/docs/gcode/G002-G003.html"> <strong>G2-G3</strong>: Arc or Circle Move </a></li> <li><a href="/docs/gcode/G004.html"> <strong></strong>: Dwell </a></li> <li><a href="/docs/gcode/G005.html"> <strong></strong>: Bézier cubic spline </a></li> <li><a href="/docs/gcode/G010.html"> <strong></strong>: Retract </a></li> <li><a href="/docs/gcode/G011.html"> <strong></strong>: Recover </a></li> <li><a href="/docs/gcode/G012.html"> <strong></strong>: Clean the Nozzle </a></li> <li><a href="/docs/gcode/G017-G019.html"> <strong>G17-G18</strong>: CNC Workspace Planes </a></li> <li><a href="/docs/gcode/G020.html"> <strong></strong>: Inch Units </a></li> <li><a href="/docs/gcode/G021.html"> <strong></strong>: Millimeter Units </a></li> <li><a href="/docs/gcode/G026.html"> <strong></strong>: Mesh Validation Pattern </a></li> <li><a href="/docs/gcode/G027.html"> <strong></strong>: Park toolhead </a></li> <li><a href="/docs/gcode/G028.html"> <strong></strong>: Auto Home </a></li> <li><a href="/docs/gcode/G029-mbl.html"> <strong></strong>: Bed Leveling (Manual) </a></li> <li><a href="/docs/gcode/G029-abl.html"> <strong></strong>: Bed Leveling (Automatic) </a></li> <li><a href="/docs/gcode/G029-ubl.html"> <strong></strong>: Bed Leveling (Unified) </a></li> <li><a href="/docs/gcode/G030.html"> <strong></strong>: Single Z-Probe </a></li> <li><a href="/docs/gcode/G031.html"> <strong></strong>: Dock Sled </a></li> <li><a href="/docs/gcode/G032.html"> <strong></strong>: Undock Sled </a></li> <li><a href="/docs/gcode/G033.html"> <strong></strong>: Delta Auto Calibration </a></li> <li><a href="/docs/gcode/G034.html"> <strong></strong>: Z Steppers Auto-Alignment </a></li> <li><a href="/docs/gcode/G038.html"> <strong>G38.2-G38.3</strong>: Probe target </a></li> <li><a href="/docs/gcode/G042.html"> <strong></strong>: Move to mesh coordinate </a></li> <li><a href="/docs/gcode/G053.html"> <strong></strong>: Move in Machine Coordinates </a></li> <li><a href="/docs/gcode/G054-G059.html"> <strong>G54-G55</strong>: Workspace Coordinate System </a></li> <li><a href="/docs/gcode/G076.html"> <strong></strong>: Probe temperature calibration </a></li> <li><a href="/docs/gcode/G080.html"> <strong></strong>: Cancel Current Motion Mode </a></li> <li><a href="/docs/gcode/G090.html"> <strong></strong>: Absolute Positioning </a></li> <li><a href="/docs/gcode/G091.html"> <strong></strong>: Relative Positioning </a></li> <li><a href="/docs/gcode/G092.html"> <strong></strong>: Set Position </a></li> <li><a href="/docs/gcode/G425.html"> <strong></strong>: Perform auto-calibration </a></li> <li><a href="/docs/gcode/M000-M001.html"> <strong>M0-M1</strong>: Unconditional stop </a></li> <li><a href="/docs/gcode/M003.html"> <strong></strong>: Spindle CW / Laser On </a></li> <li><a href="/docs/gcode/M004.html"> <strong></strong>: Spindle CCW / Laser On </a></li> <li><a href="/docs/gcode/M005.html"> <strong></strong>: Spindle / Laser Off </a></li> <li><a href="/docs/gcode/M016.html"> <strong></strong>: Expected Printer Check </a></li> <li><a href="/docs/gcode/M017.html"> <strong></strong>: Enable Steppers </a></li> <li><a href="/docs/gcode/M018.html"> <strong>M18-M84</strong>: Disable steppers </a></li> <li><a href="/docs/gcode/M020.html"> <strong></strong>: List SD Card </a></li> <li><a href="/docs/gcode/M021.html"> <strong></strong>: Init SD card </a></li> <li><a href="/docs/gcode/M022.html"> <strong></strong>: Release SD card </a></li> <li><a href="/docs/gcode/M023.html"> <strong></strong>: Select SD file </a></li> <li><a href="/docs/gcode/M024.html"> <strong></strong>: Start or Resume SD print </a></li> <li><a href="/docs/gcode/M025.html"> <strong></strong>: Pause SD print </a></li> <li><a href="/docs/gcode/M026.html"> <strong></strong>: Set SD position </a></li> <li><a href="/docs/gcode/M027.html"> <strong></strong>: Report SD print status </a></li> <li><a href="/docs/gcode/M028.html"> <strong></strong>: Start SD write </a></li> <li><a href="/docs/gcode/M029.html"> <strong></strong>: Stop SD write </a></li> <li><a href="/docs/gcode/M030.html"> <strong></strong>: Delete SD file </a></li> <li><a href="/docs/gcode/M031.html"> <strong></strong>: Print time </a></li> <li><a href="/docs/gcode/M032.html"> <strong></strong>: Select and Start </a></li> <li><a href="/docs/gcode/M033.html"> <strong></strong>: Get Long Path </a></li> <li><a href="/docs/gcode/M034.html"> <strong></strong>: SDCard Sorting </a></li> <li><a href="/docs/gcode/M042.html"> <strong></strong>: Set Pin State </a></li> <li><a href="/docs/gcode/M043.html"> <strong></strong>: Debug Pins </a></li> <li><a href="/docs/gcode/M043-T.html"> <strong>M43 T</strong>: Toggle Pins </a></li> <li><a href="/docs/gcode/M048.html"> <strong></strong>: Probe Accuracy Test </a></li> <li><a href="/docs/gcode/M073.html"> <strong></strong>: Set Print Progress </a></li> <li><a href="/docs/gcode/M075.html"> <strong></strong>: Start Print Job Timer </a></li> <li><a href="/docs/gcode/M076.html"> <strong></strong>: Pause Print Job </a></li> <li><a href="/docs/gcode/M077.html"> <strong></strong>: Stop Print Job Timer </a></li> <li><a href="/docs/gcode/M078.html"> <strong></strong>: Print Job Stats </a></li> <li><a href="/docs/gcode/M080.html"> <strong></strong>: Power On </a></li> <li><a href="/docs/gcode/M081.html"> <strong></strong>: Power Off </a></li> <li><a href="/docs/gcode/M082.html"> <strong></strong>: E Absolute </a></li> <li><a href="/docs/gcode/M083.html"> <strong></strong>: E Relative </a></li> <li><a href="/docs/gcode/M085.html"> <strong></strong>: Inactivity Shutdown </a></li> <li><a href="/docs/gcode/M092.html"> <strong></strong>: Set Axis Steps-per-unit </a></li> <li><a href="/docs/gcode/M100.html"> <strong></strong>: Free Memory </a></li> <li><a href="/docs/gcode/M104.html"> <strong></strong>: Set Hotend Temperature </a></li> <li><a href="/docs/gcode/M105.html"> <strong></strong>: Report Temperatures </a></li> <li><a href="/docs/gcode/M106.html"> <strong></strong>: Set Fan Speed </a></li> <li><a href="/docs/gcode/M107.html"> <strong></strong>: Fan Off </a></li> <li><a href="/docs/gcode/M108.html"> <strong></strong>: Break and Continue </a></li> <li><a href="/docs/gcode/M109.html"> <strong></strong>: Wait for Hotend Temperature </a></li> <li><a href="/docs/gcode/M110.html"> <strong></strong>: Set Line Number </a></li> <li><a href="/docs/gcode/M111.html"> <strong></strong>: Debug Level </a></li> <li><a href="/docs/gcode/M112.html"> <strong></strong>: Emergency Stop </a></li> <li><a href="/docs/gcode/M113.html"> <strong></strong>: Host Keepalive </a></li> <li><a href="/docs/gcode/M114.html"> <strong></strong>: Get Current Position </a></li> <li><a href="/docs/gcode/M115.html"> <strong></strong>: Firmware Info </a></li> <li><a href="/docs/gcode/M117.html"> <strong></strong>: Set LCD Message </a></li> <li><a href="/docs/gcode/M118.html"> <strong></strong>: Serial print </a></li> <li><a href="/docs/gcode/M119.html"> <strong></strong>: Endstop States </a></li> <li><a href="/docs/gcode/M120.html"> <strong></strong>: Enable Endstops </a></li> <li><a href="/docs/gcode/M121.html"> <strong></strong>: Disable Endstops </a></li> <li><a href="/docs/gcode/M122.html"> <strong></strong>: TMC Debugging </a></li> <li><a href="/docs/gcode/M125.html"> <strong></strong>: Park Head </a></li> <li><a href="/docs/gcode/M126.html"> <strong></strong>: Baricuda 1 Open </a></li> <li><a href="/docs/gcode/M127.html"> <strong></strong>: Baricuda 1 Close </a></li> <li><a href="/docs/gcode/M128.html"> <strong></strong>: Baricuda 2 Open </a></li> <li><a href="/docs/gcode/M129.html"> <strong></strong>: Baricuda 2 Close </a></li> <li><a href="/docs/gcode/M140.html"> <strong></strong>: Set Bed Temperature </a></li> <li><a href="/docs/gcode/M141.html"> <strong></strong>: Set Chamber Temperature </a></li> <li><a href="/docs/gcode/M145.html"> <strong></strong>: Set Material Preset </a></li> <li><a href="/docs/gcode/M149.html"> <strong></strong>: Set Temperature Units </a></li> <li><a href="/docs/gcode/M150.html"> <strong></strong>: Set RGB(W) Color </a></li> <li><a href="/docs/gcode/M155.html"> <strong></strong>: Temperature Auto-Report </a></li> <li><a href="/docs/gcode/M163.html"> <strong></strong>: Set Mix Factor </a></li> <li><a href="/docs/gcode/M164.html"> <strong></strong>: Save Mix </a></li> <li><a href="/docs/gcode/M165.html"> <strong></strong>: Set Mix </a></li> <li><a href="/docs/gcode/M166.html"> <strong></strong>: Gradient Mix </a></li> <li><a href="/docs/gcode/M190.html"> <strong></strong>: Wait for Bed Temperature </a></li> <li><a href="/docs/gcode/M191.html"> <strong></strong>: Wait for Chamber Temperature </a></li> <li><a href="/docs/gcode/M200.html"> <strong></strong>: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M201.html"> <strong></strong>: Set Print Max Acceleration </a></li> <li><a href="/docs/gcode/M203.html"> <strong></strong>: Set Max Feedrate </a></li> <li><a href="/docs/gcode/M204.html"> <strong></strong>: Set Starting Acceleration </a></li> <li><a href="/docs/gcode/M205.html"> <strong></strong>: Set Advanced Settings </a></li> <li><a href="/docs/gcode/M206.html"> <strong></strong>: Set Home Offsets </a></li> <li><a href="/docs/gcode/M207.html"> <strong></strong>: Set Firmware Retraction </a></li> <li><a href="/docs/gcode/M208.html"> <strong></strong>: Firmware Recover </a></li> <li><a href="/docs/gcode/M209.html"> <strong></strong>: Set Auto Retract </a></li> <li><a href="/docs/gcode/M211.html"> <strong></strong>: Software Endstops </a></li> <li><a href="/docs/gcode/M217.html"> <strong></strong>: Filament swap parameters </a></li> <li><a href="/docs/gcode/M218.html"> <strong></strong>: Set Hotend Offset </a></li> <li><a href="/docs/gcode/M220.html"> <strong></strong>: Set Feedrate Percentage </a></li> <li><a href="/docs/gcode/M221.html"> <strong></strong>: Set Flow Percentage </a></li> <li><a href="/docs/gcode/M226.html"> <strong></strong>: Wait for Pin State </a></li> <li><a href="/docs/gcode/M240.html"> <strong></strong>: Trigger Camera </a></li> <li><a href="/docs/gcode/M250.html"> <strong></strong>: LCD Contrast </a></li> <li><a href="/docs/gcode/M260.html"> <strong></strong>: I2C Send </a></li> <li><a href="/docs/gcode/M261.html"> <strong></strong>: I2C Request </a></li> <li><a href="/docs/gcode/M280.html"> <strong></strong>: Servo Position </a></li> <li><a href="/docs/gcode/M290.html"> <strong></strong>: Babystep </a></li> <li><a href="/docs/gcode/M300.html"> <strong></strong>: Play Tone </a></li> <li><a href="/docs/gcode/M301.html"> <strong></strong>: Set Hotend PID </a></li> <li><a href="/docs/gcode/M302.html"> <strong></strong>: Cold Extrude </a></li> <li><a href="/docs/gcode/M303.html"> <strong></strong>: PID autotune </a></li> <li><a href="/docs/gcode/M304.html"> <strong></strong>: Set Bed PID </a></li> <li><a href="/docs/gcode/M350.html"> <strong></strong>: Set micro-stepping </a></li> <li><a href="/docs/gcode/M351.html"> <strong></strong>: Set Microstep Pins </a></li> <li><a href="/docs/gcode/M355.html"> <strong></strong>: Case Light Control </a></li> <li><a href="/docs/gcode/M360.html"> <strong></strong>: SCARA Theta A </a></li> <li><a href="/docs/gcode/M361.html"> <strong></strong>: SCARA Theta-B </a></li> <li><a href="/docs/gcode/M362.html"> <strong></strong>: SCARA Psi-A </a></li> <li><a href="/docs/gcode/M363.html"> <strong></strong>: SCARA Psi-B </a></li> <li><a href="/docs/gcode/M364.html"> <strong></strong>: SCARA Psi-C </a></li> <li><a href="/docs/gcode/M380.html"> <strong></strong>: Activate Solenoid </a></li> <li><a href="/docs/gcode/M381.html"> <strong></strong>: Deactivate Solenoids </a></li> <li><a href="/docs/gcode/M400.html"> <strong></strong>: Finish Moves </a></li> <li><a href="/docs/gcode/M401.html"> <strong></strong>: Deploy Probe </a></li> <li><a href="/docs/gcode/M402.html"> <strong></strong>: Stow Probe </a></li> <li><a href="/docs/gcode/M403.html"> <strong></strong>: MMU2 Filament Type </a></li> <li><a href="/docs/gcode/M404.html"> <strong></strong>: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M405.html"> <strong></strong>: Filament Width Sensor On </a></li> <li><a href="/docs/gcode/M406.html"> <strong></strong>: Filament Width Sensor Off </a></li> <li><a href="/docs/gcode/M407.html"> <strong></strong>: Filament Width </a></li> <li><a href="/docs/gcode/M410.html"> <strong></strong>: Quickstop </a></li> <li><a href="/docs/gcode/M412.html"> <strong></strong>: Filament Runout </a></li> <li><a href="/docs/gcode/M413.html"> <strong></strong>: Power-loss Recovery </a></li> <li><a href="/docs/gcode/M420.html"> <strong></strong>: Bed Leveling State </a></li> <li><a href="/docs/gcode/M421.html"> <strong></strong>: Set Mesh Value </a></li> <li><a href="/docs/gcode/M422.html"> <strong></strong>: Set Z Motor XY </a></li> <li><a href="/docs/gcode/M425.html"> <strong></strong>: Backlash compensation </a></li> <li><a href="/docs/gcode/M428.html"> <strong></strong>: Home Offsets Here </a></li> <li><a href="/docs/gcode/M486.html"> <strong></strong>: Cancel Objects </a></li> <li><a href="/docs/gcode/M500.html"> <strong></strong>: Save Settings </a></li> <li><a href="/docs/gcode/M501.html"> <strong></strong>: Restore Settings </a></li> <li><a href="/docs/gcode/M502.html"> <strong></strong>: Factory Reset </a></li> <li><a href="/docs/gcode/M503.html"> <strong></strong>: Report Settings </a></li> <li><a href="/docs/gcode/M504.html"> <strong></strong>: Validate EEPROM contents </a></li> <li><a href="/docs/gcode/M524.html"> <strong></strong>: Abort SD print </a></li> <li><a href="/docs/gcode/M540.html"> <strong></strong>: Endstops Abort SD </a></li> <li><a href="/docs/gcode/M569.html"> <strong></strong>: Set TMC stepping mode </a></li> <li><a href="/docs/gcode/M575.html"> <strong></strong>: Serial baud rate </a></li> <li><a href="/docs/gcode/M600.html"> <strong></strong>: Filament Change </a></li> <li><a href="/docs/gcode/M603.html"> <strong></strong>: Configure Filament Change </a></li> <li><a href="/docs/gcode/M605.html"> <strong></strong>: Dual Nozzle Mode </a></li> <li><a href="/docs/gcode/M665.html"> <strong></strong>: Delta Configuration </a></li> <li><a href="/docs/gcode/M665-scara.html"> <strong></strong>: SCARA Configuration </a></li> <li><a href="/docs/gcode/M666.html"> <strong></strong>: Set Delta endstop adjustments </a></li> <li><a href="/docs/gcode/M666-dual.html"> <strong></strong>: Set dual endstop offsets </a></li> <li><a href="/docs/gcode/M701.html"> <strong></strong>: Load filament </a></li> <li><a href="/docs/gcode/M702.html"> <strong></strong>: Unload filament </a></li> <li><a href="/docs/gcode/M851.html"> <strong></strong>: XYZ Probe Offset </a></li> <li><a href="/docs/gcode/M852.html"> <strong></strong>: Bed Skew Compensation </a></li> <li><a href="/docs/gcode/M871.html"> <strong></strong>: Probe temperature config </a></li> <li><a href="/docs/gcode/M900.html"> <strong></strong>: Linear Advance Factor </a></li> <li><a href="/docs/gcode/M906.html"> <strong></strong>: TMC Motor Current </a></li> <li><a href="/docs/gcode/M907.html"> <strong></strong>: Set Motor Current </a></li> <li><a href="/docs/gcode/M908.html"> <strong></strong>: Set Trimpot Pins </a></li> <li><a href="/docs/gcode/M909.html"> <strong></strong>: DAC Print Values </a></li> <li><a href="/docs/gcode/M910.html"> <strong></strong>: Commit DAC to EEPROM </a></li> <li><a href="/docs/gcode/M911.html"> <strong></strong>: TMC OT Pre-Warn Condition </a></li> <li><a href="/docs/gcode/M912.html"> <strong></strong>: Clear TMC OT Pre-Warn </a></li> <li><a href="/docs/gcode/M913.html"> <strong></strong>: Set Hybrid Threshold Speed </a></li> <li><a href="/docs/gcode/M914.html"> <strong></strong>: TMC Bump Sensitivity </a></li> <li><a href="/docs/gcode/M915.html"> <strong></strong>: TMC Z axis calibration </a></li> <li><a href="/docs/gcode/M928.html"> <strong></strong>: Start SD Logging </a></li> <li><a href="/docs/gcode/M997.html"> <strong></strong>: Firmware update </a></li> <li><a href="/docs/gcode/M999.html"> <strong></strong>: STOP Restart </a></li> <li><a href="/docs/gcode/M7219.html"> <strong></strong>: MAX7219 Control </a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/hardware/boards.html">Boards</a></li> <li class="divider"></li> <li><a href="/docs/hardware/endstops.html">Endstops</a></li> <li><a href="/docs/hardware/tmc_drivers.html">Trinamic drivers</a></li> </ul> </li> <li class="dropdown-submenu setting"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings</a> <ul class="dropdown-menu"> <li><a href="/meta/setting/"> All documents </a></li> <li class="divider"></li> <li><a href="/docs/setting/ComingSoon.html">COMING_SOON</a></li> </ul> </li> <li><a href="/docs/basics/troubleshooting.html">Troubleshooting</a></li> <li class="divider"></li> <li><a href="/meta/needs-review/">Documentation Needing Review</a></li> </ul> </li> <li id="searchbox"> <form action="/meta/search/"> <input type="search" name="q" placeholder="Search"/> </form> </li> </ul> <ul class="nav navbar-nav navbar-right visible-lg-block"> <li> <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_gcode/G029-ubl.md" data-proofer-ignore> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>Edit Page</span> </a> </li> </ul> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"/> </div> </div> </nav> <div class="container gcode" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class=""> <div class="tocify gcode"> <ul class="tocify-header nav nav-list"> <li class="tocify-item"> <a href="/docs/gcode/G000-G001.html"><strong>G0-G1</strong>: Linear Move</a></li> <li class="tocify-item"> <a href="/docs/gcode/G002-G003.html"><strong>G2-G3</strong>: Arc or Circle Move</a></li> <li class="tocify-item"> <a href="/docs/gcode/G017-G019.html"><strong>G17-G18</strong>: CNC Workspace Planes</a></li> <li class="tocify-item"> <a href="/docs/gcode/G038.html"><strong>G38.2-G38.3</strong>: Probe target</a></li> <li class="tocify-item"> <a href="/docs/gcode/G054-G059.html"><strong>G54-G55</strong>: Workspace Coordinate System</a></li> <li class="tocify-item"> <a href="/docs/gcode/M000-M001.html"><strong>M0-M1</strong>: Unconditional stop</a></li> <li class="tocify-item"> <a href="/docs/gcode/M018.html"><strong>M18-M84</strong>: Disable steppers</a></li> <li class="tocify-item"> <a href="/docs/gcode/M043-T.html"><strong>M43 T</strong>: Toggle Pins</a></li> </ul> </div> </div> </div> <div class="col-lg-9 col-md-8 custom-bg-white"> <div class="row"> <div class="col-md-12"> <div class="col-lg-12 row meta" id="gcode-header"> <p class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="https://github.com/MarlinFirmware" data-toggle="tooltip" data-placement="bottom" title="Visit MarlinFirmware's profile on Github"><img class="avatar avatar-small" alt="MarlinFirmware" width="30" height="30" data-proofer-ignore="true" src="https://avatars0.githubusercontent.com/MarlinFirmware?v=3&s=30" srcset="https://avatars0.githubusercontent.com/MarlinFirmware?v=3&s=30 1x, https://avatars0.githubusercontent.com/MarlinFirmware?v=3&s=60 2x, https://avatars0.githubusercontent.com/MarlinFirmware?v=3&s=90 3x, https://avatars0.githubusercontent.com/MarlinFirmware?v=3&s=120 4x"/></a> </p> <h1> G29 - Bed Leveling (Unified) </h1> <span class="label label-warning"><span data-toggle="tooltip" data-placement="bottom" title="Experimental feature"><i class="fa fa-flask" aria-hidden="true"></i></span></span> <span class="label label-primary"><i class="fa fa-pencil-square" aria-hidden="true"></i> Probe the bed and enable leveling compensation.</span> <span class="label label-requires"><code>AUTO_BED_LEVELING_UBL</code></span> </div> <div class="col-lg-12 row long"> <h3>Description</h3> <p>The Unified Bed Leveling System (UBL) provides a comprehensive set of resources to produce the best bed leveling results possible.</p> <p>See the full <a href="/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a> documentation for more details. (Examples below.)</p> </div> <div class="col-lg-12 row notes"> <h3>Notes</h3> <p>Requires <code class="highlighter-rouge">AUTO_BED_LEVELING_UBL</code>.</p> <p><code class="highlighter-rouge">G28</code> disables bed leveling. Follow with <code class="highlighter-rouge">M420 S</code> to turn leveling on, or use <code class="highlighter-rouge">RESTORE_LEVELING_AFTER_G28</code> to automatically keep leveling on after <code class="highlighter-rouge">G28</code>.</p> <p>It’s highly recommended to enable EEPROM. With EEPROM storage enabled, UBL is limited to 3-Point (<code class="highlighter-rouge">G29 P0 T</code>) and Grid (<code class="highlighter-rouge">G29 P0 G</code>) Leveling.</p> <p>When you do a <code class="highlighter-rouge">G28</code> and then a <code class="highlighter-rouge">G29 P1</code> to automatically build your first mesh, you’ll notice that UBL probes increasingly far from the starting location. (The starting location defaults to the center of the bed.) Other grid leveling systems start in the corner and probe in a zigzag. UBL’s pattern is better for Delta machines, allowing for the center of the Mesh to be populated (and edited) more quickly. You can then do a small test print to check the mesh early in the process. You don’t need to populate the entire mesh to use it. You don’t want to spend a lot of time generating a mesh only to realize that the the resolution or <code class="highlighter-rouge">M851 Z</code> probe offset is off. UBL mesh generation gathers points closest the nozzle unless you specify an (X,Y) coordinate pair.</p> <p>UBL requires a decent amount of EEPROM to store its mesh data. And it takes some effort to get this Mesh data correct for a given machine. To keep this data from being destroyed when the EEPROM version changes the Mesh data is stored at the high end of the EEPROM. (Happily, no developers seem to mind.)</p> <p>This system is built around Edward Patel’s “Mesh Bed Leveling” system. A big “Thanks!” to him and to the creators of 3-Point and Grid Based leveling. Combining their contributions we now have the functionality and features of all three systems combined.</p> </div> <div class="col-lg-12 row usage" id="usage-g029c"> <h3>Usage</h3> <code> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Activate** Unified Bed Leveling (i.e., `M420 S1`) "> &#x5B;A&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Business Card** mode (`P2` only) - Use the 'Business Card' mode of the Manual Probe subsystem with `P2`. - In this mode of `G29 P2`, use a shim that the nozzle can grab onto as it is lowered. In principle, the nozzle-bed distance is the same when the same resistance is felt in the shim. You can omit the numerical value on first invocation of `G29 P2 B` to measure shim thickness. Subsequent use of `B` will apply the previously-measured thickness by default. - Note: A non-compressible Spark Gap feeler gauge is recommended over a business card. "> &#x5B;B&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="- `G29 P1 C` Continue: Continues the generation of a partially-constructed Mesh without invalidating previous measurements. - `G29 P2 C` Constant: specifies a Constant and tells the Manual Probe subsystem to use the current location in its search for the closest unmeasured Mesh Point. - `G29 P3 C` Constant: specifies the Constant for the fill. Otherwise, uses a "reasonable" value. - `G29 Z C` Current: Use the Current location (instead of bed center or nearest edge). "> &#x5B;C&lt;bool/float&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="Disable Unified Bed Leveling (i.e., `M420 S0`)."> &#x5B;D&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="Stow probe after probing `E`ach point (`P1` only)."> &#x5B;E&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Fade** height. (UBL only! For others use `M420 Z`) Fade the amount of Mesh Based Compensation over a specified height. At the specified height, no correction is applied and natural printer kenimatics take over. If no number is specified for the command, 10mm is assumed to be reasonable. "> &#x5B;F&lt;linear&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Height**: - `G29 P2 H`: Height for Manual Probe raise (`P2` only). Specify the Height to raise the nozzle after each manual probe of the bed. If omitted, the nozzle will raise by `Z_CLEARANCE_BETWEEN_PROBES`. - `G29 P4 H` : Offset above the mesh height to place the nozzle. If omitted, `Z_CLEARANCE_BETWEEN_PROBES` will be used. "> &#x5B;H&lt;linear&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Invalidate** a number of mesh points (default 1). - Invalidate Mesh Points near the given `X Y` (Default: nozzle position) - If no `I` value is given, only the point nearest to the given position is invalidated. Use `T` to produce a map afterward. This command is useful to invalidate a portion of the Mesh so it can be adjusted using other UBL tools. When attempting to invalidate an isolated bad mesh point, the `T` option shows the nozzle position in the Mesh with (#). - You can move the nozzle around and use this feature to select the center of the area (or cell) to invalidate. "> &#x5B;I&lt;int&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Grid** (or 3-Point) leveling: - These options calculate a plane and adjust the existing mesh to the bed tilt. - If a value is provided, probe a grid with the given number of points, squared. - With no value, probe 3 points to find the plane of the bed. "> &#x5B;J&lt;int&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Kompare**: Subtract (diff) the stored mesh with the given index from the current mesh. This operates on the mesh in-memory, so it will probably make the active mesh unsuitable for printing. "> &#x5B;K&lt;index&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Load** a mesh. If no index is given, load the previously-activated mesh. The given mesh index will be used for subsequent Load and Store operations. "> &#x5B;L&lt;index&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Phase**: The `P`hase commands are used for the bulk of the work to setup a Mesh. In general, you'll start by initializing with a `G29 P0` or a `G29 P1` then do further refinement with additional Phases. "> &#x5B;P&lt;0&#x7C;1&#x7C;2&#x7C;3&#x7C;4&#x7C;5&#x7C;6&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="Test Pattern. Load the specified Test Pattern to check for correct operation. This command is intended for developers and is not required for everyday bed leveling. "> &#x5B;Q&lt;index&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="Repeat count. (Default `GRID_MAX_POINTS_X * GRID_MAX_POINTS_Y`). - `P3` Example: `G29 P3 R4 C0` will set the 4 points closest to the nozzle to `0`. - `P4` Example: `G29 P4 R3 X80 Y80` will allow you to adjust the 3 points closest to X80 Y80. - This parameter does not apply to Phase 1! `P1` will always attempt to probe the full grid. "> &#x5B;R&lt;int&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Save** the mesh to EEPROM in the given slot. - If no slot number is given, save to the last-activated slot. - Use `S-1` for G-code output that can be used to restore the mesh anytime. - Note that this command also saves the current UBL state (enabled or disabled). "> &#x5B;S&lt;slot&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Topology**: Include a Topology Map in the output. - This parameter can be used alone (`G29 T`) or in combination with most of the other commands. - This option works with all Phase commands (e.g., `G29 P4 R 5 T X 50 Y100 C-0.1 O`) - A map type can also be specified: - `T0`: Human-readable (the default) - `T1`: Delimited. Suitable to paste into a spreadsheet to obtain a 3D graph of the mesh. "> &#x5B;T&lt;0&#x7C;1&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Unlevel**: Probe the outer perimeter to assist bed tramming. (Use with `G29 P1 O`) - Only used with `G29 P1 T U`. This speeds up the probing of the edge of the bed. This option is useful when the entire bed doesn't need to be probed because it will be physically adjusted (tramming). "> &#x5B;U&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="Verbosity Level (0-4)"> &#x5B;V&lt;0&#x7C;1&#x7C;2&#x7C;3&#x7C;4&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**_What?_**: Display valuable UBL data. "> &#x5B;W&lt;bool&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**X position** for all phases and commands (Default: current X) "> &#x5B;X&lt;linear&gt;&#x5D; </span> <span data-toggle="tooltip" data-placement="bottom" data-original-title="**Y position** for all phases and commands (Default: current Y) "> &#x5B;Y&lt;linear&gt;&#x5D; </span> </code> </div> <div class="col-lg-12 row params"> <h4>Parameters</h4> <div class="table-responsive"> <table class="table"> <tbody> <tr> <td class="arg"><code> &#x5B;A&lt;bool&gt;&#x5D; </code></td> <td> <p><strong>Activate</strong> Unified Bed Leveling (i.e., <code class="highlighter-rouge">M420 S1</code>)</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;B&lt;bool&gt;&#x5D; </code></td> <td> <p><strong>Business Card</strong> mode (<code class="highlighter-rouge">P2</code> only)</p> <ul> <li>Use the ‘Business Card’ mode of the Manual Probe subsystem with <code class="highlighter-rouge">P2</code>.</li> <li>In this mode of <code class="highlighter-rouge">G29 P2</code>, use a shim that the nozzle can grab onto as it is lowered. In principle, the nozzle-bed distance is the same when the same resistance is felt in the shim. You can omit the numerical value on first invocation of <code class="highlighter-rouge">G29 P2 B</code> to measure shim thickness. Subsequent use of <code class="highlighter-rouge">B</code> will apply the previously-measured thickness by default.</li> <li>Note: A non-compressible Spark Gap feeler gauge is recommended over a business card.</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;C&lt;bool/float&gt;&#x5D; </code></td> <td> <ul> <li><code class="highlighter-rouge">G29 P1 C</code> Continue: Continues the generation of a partially-constructed Mesh without invalidating previous measurements.</li> <li><code class="highlighter-rouge">G29 P2 C</code> Constant: specifies a Constant and tells the Manual Probe subsystem to use the current location in its search for the closest unmeasured Mesh Point.</li> <li><code class="highlighter-rouge">G29 P3 C</code> Constant: specifies the Constant for the fill. Otherwise, uses a “reasonable” value.</li> <li><code class="highlighter-rouge">G29 Z C</code> Current: Use the Current location (instead of bed center or nearest edge).</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;D&lt;bool&gt;&#x5D; </code></td> <td> <p>Disable Unified Bed Leveling (i.e., <code class="highlighter-rouge">M420 S0</code>).</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;E&lt;bool&gt;&#x5D; </code></td> <td> <p>Stow probe after probing <code class="highlighter-rouge">E</code>ach point (<code class="highlighter-rouge">P1</code> only).</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;F&lt;linear&gt;&#x5D; </code></td> <td> <p><strong>Fade</strong> height. (UBL only! For others use <code class="highlighter-rouge">M420 Z</code>)</p> <p>Fade the amount of Mesh Based Compensation over a specified height. At the specified height, no correction is applied and natural printer kenimatics take over. If no number is specified for the command, 10mm is assumed to be reasonable.</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;H&lt;linear&gt;&#x5D; </code></td> <td> <p><strong>Height</strong>:</p> <ul> <li><code class="highlighter-rouge">G29 P2 H</code>: Height for Manual Probe raise (<code class="highlighter-rouge">P2</code> only). Specify the Height to raise the nozzle after each manual probe of the bed. If omitted, the nozzle will raise by <code class="highlighter-rouge">Z_CLEARANCE_BETWEEN_PROBES</code>.</li> <li><code class="highlighter-rouge">G29 P4 H</code> : Offset above the mesh height to place the nozzle. If omitted, <code class="highlighter-rouge">Z_CLEARANCE_BETWEEN_PROBES</code> will be used.</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;I&lt;int&gt;&#x5D; </code></td> <td> <p><strong>Invalidate</strong> a number of mesh points (default 1).</p> <ul> <li>Invalidate Mesh Points near the given <code class="highlighter-rouge">X Y</code> (Default: nozzle position)</li> <li>If no <code class="highlighter-rouge">I</code> value is given, only the point nearest to the given position is invalidated. Use <code class="highlighter-rouge">T</code> to produce a map afterward. This command is useful to invalidate a portion of the Mesh so it can be adjusted using other UBL tools. When attempting to invalidate an isolated bad mesh point, the <code class="highlighter-rouge">T</code> option shows the nozzle position in the Mesh with (#).</li> <li>You can move the nozzle around and use this feature to select the center of the area (or cell) to invalidate.</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;J&lt;int&gt;&#x5D; </code></td> <td> <p><strong>Grid</strong> (or 3-Point) leveling:</p> <ul> <li>These options calculate a plane and adjust the existing mesh to the bed tilt.</li> <li>If a value is provided, probe a grid with the given number of points, squared.</li> <li>With no value, probe 3 points to find the plane of the bed.</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;K&lt;index&gt;&#x5D; </code></td> <td> <p><strong>Kompare</strong>: Subtract (diff) the stored mesh with the given index from the current mesh. This operates on the mesh in-memory, so it will probably make the active mesh unsuitable for printing.</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;L&lt;index&gt;&#x5D; </code></td> <td> <p><strong>Load</strong> a mesh. If no index is given, load the previously-activated mesh. The given mesh index will be used for subsequent Load and Store operations.</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;P&lt;0&#x7C;1&#x7C;2&#x7C;3&#x7C;4&#x7C;5&#x7C;6&gt;&#x5D; </code></td> <td> <p><strong>Phase</strong>: The <code class="highlighter-rouge">P</code>hase commands are used for the bulk of the work to setup a Mesh. In general, you’ll start by initializing with a <code class="highlighter-rouge">G29 P0</code> or a <code class="highlighter-rouge">G29 P1</code> then do further refinement with additional Phases.</p> <ul class="param-desc-list"> <li> <code>P0</code>: <p><strong>Zero Mesh Data</strong> and turn off the Mesh Compensation System. This reverts the machine to the same state it was in before UBL Compensation was enabled. Setting the entire Mesh to Zero is a special case to allow a subsequent <code class="highlighter-rouge">G</code> or <code class="highlighter-rouge">T</code> leveling operation for backward-compatibility.</p> </li> <li> <code>P1</code>: <p><strong>Automatic Probing</strong> invalidates the mesh and continues automatic probing using the probe.</p> <ul> <li>In most cases the probe can’t reach all areas that the nozzle can due to the offsets specified by <code class="highlighter-rouge">X_PROBE_OFFSET_FROM_EXTRUDER</code> and <code class="highlighter-rouge">Y_PROBE_OFFSET_FROM_EXTRUDER</code>. Deltabots can only probe within the area where <code class="highlighter-rouge">DELTA_PROBEABLE_RADIUS</code> and <code class="highlighter-rouge">DELTA_PRINTABLE_RADIUS</code> overlap.</li> <li>Unreachable points can be filled in later with the <code class="highlighter-rouge">P2</code> and <code class="highlighter-rouge">P3</code> phases.</li> <li>Use <code class="highlighter-rouge">C</code> to leave the previous mesh intact and automatically probe needed points. This allows you to invalidate parts of the mesh but still use Automatic Probing.</li> <li>The <code class="highlighter-rouge">X</code> and <code class="highlighter-rouge">Y</code> parameters prioritize where to try and measure points. If omitted, the current probe position is used.</li> <li>Use <code class="highlighter-rouge">T</code> (Topology) in this phase to report the probing results.</li> <li><code class="highlighter-rouge">P1</code> will suspend mesh generation if the controller button is held down. Note that you may need to press and hold the switch for several seconds if moves are underway.</li> </ul> </li> <li> <code>P2</code>: <p><strong>Probe Areas</strong> of the mesh that can’t be automatically handled.</p> <ul> <li>Use <code class="highlighter-rouge">H</code> to set the height between mesh points. If omitted, Z_CLEARANCE_BETWEEN_PROBES is used. Smaller values will be quicker. Move the nozzle down till it barely touches the bed. Make sure the nozzle is clean and unobstructed. Use caution and move slowly. This can damage your printer! (Uses SIZE_OF_LITTLE_RAISE mm if the nozzle is moving less than BIG_RAISE_NOT_NEEDED mm.)</li> <li>The <code class="highlighter-rouge">H</code> value can be negative if the mesh dips in a large area. Press and hold the controller button to terminate the current Phase 2 command. You can then re-issue <code class="highlighter-rouge">G29 P 2</code> with an <code class="highlighter-rouge">H</code> parameter more suitable for the area you’re manually probing. Note that the command tries to start in a corner of the bed where movement will be predictable. Override the distance calculation location with the <code class="highlighter-rouge">X</code> and <code class="highlighter-rouge">Y</code> parameters. You can print a mesh Map (<code class="highlighter-rouge">G29 T</code>) to see where the mesh is invalidated and where the nozzle needs to move to complete the command. Use <code class="highlighter-rouge">C</code> to indicate that the search should be based on the current position.</li> <li>The <code class="highlighter-rouge">B</code> parameter for this command is described above. It places the manual probe subsystem into Business Card mode where the thickness of a business card is measured and then used to accurately set the nozzle height in all manual probing for the duration of the command. A Business card can be used, but you’ll get better results with a flexible Shim that doesn’t compress. This makes it easier to produce similar amounts of force and get more accurate measurements. Google if you’re not sure how to use a shim.</li> <li>The <code class="highlighter-rouge">T</code> (Map) parameter helps track mesh building progress.</li> <li>NOTE: <code class="highlighter-rouge">P2</code> requires an LCD controller!</li> </ul> </li> <li> <code>P3</code>: <p><strong>Fill Unpopulated</strong> regions of the mesh with a fixed value (<code class="highlighter-rouge">C</code>) or use ‘smart fill’ to extrapolate from already probed points (<code class="highlighter-rouge">no argument</code>).</p> <ul> <li>With a <code class="highlighter-rouge">C</code> constant, the closest invalid mesh points to the nozzle will be filled, and then a repeat count can also be specified with <code class="highlighter-rouge">R</code>.</li> <li>Without <code class="highlighter-rouge">C</code> it does a <strong>Smart Fill</strong>, which scans the mesh from the edges inward looking for invalid mesh points. Adjacent points are used to determine the bed slope. If the bed is sloped upward from the invalid point, it takes the value of the nearest point. If sloped downward, it’s replaced by a value that puts all three points in a line. This version of <code class="highlighter-rouge">G29 P3</code> is a quick, easy and (usually) safe way to populate unprobed mesh regions before continuing to <code class="highlighter-rouge">G26</code> Mesh Validation Pattern. Note that this populates the mesh with unverified values. Pay attention and use caution.</li> </ul> </li> <li> <code>P4</code>: <p><strong>Fine Tune</strong> the Mesh. Generally used in the form <code class="highlighter-rouge">G29 P4 Rnn Xxxx Yyyy</code>.</p> <ul> <li>This phase requires an LCD Panel. To fine-tune the mesh without a controller, use <code class="highlighter-rouge">G42</code> and <code class="highlighter-rouge">M421</code>.</li> <li>Phase 4 is meant to be used with <code class="highlighter-rouge">G26</code> Mesh Validation to fine tune the mesh by direct editing of Mesh Points. Raise and lower points to fine tune the mesh until it gives consistently reliable adhesion.</li> <li><code class="highlighter-rouge">P4</code> moves to the closest Mesh Point (and/or the given <code class="highlighter-rouge">X</code> <code class="highlighter-rouge">Y</code>), raises the nozzle above the mesh height by the given <code class="highlighter-rouge">H</code> offset (or default Z_CLEARANCE_BETWEEN_PROBES), and waits while the controller is used to adjust the nozzle height. On click the displayed height is saved in the mesh.</li> <li>Start Phase 4 at a specific location with <code class="highlighter-rouge">X</code> and <code class="highlighter-rouge">Y</code>. Adjust a specific number of Mesh Points with the <code class="highlighter-rouge">R</code> (Repeat) parameter. (If <code class="highlighter-rouge">R</code> is left out, the whole matrix is assumed.) This command can be terminated early (e.g., after editing the area of interest) by pressing and holding the encoder button.</li> <li>The general form is <code class="highlighter-rouge">G29 P4 [R points] [X position] [Y position]</code>.</li> <li>The <code class="highlighter-rouge">H[offset]</code><code class="highlighter-rouge"> parameter is useful if a shim is used to fine-tune the mesh. For a 0.4mm shim the command would be </code>G29 P4 H0.4`. The nozzle is moved to the shim height, you adjust height to the shim, and on click the height minus the shim thickness is saved in the mesh.</li> <li><em>USE WITH CAUTION, as a bad mesh can cause the nozzle to crash into the bed!</em></li> </ul> </li> <li> <code>P5</code>: <p><strong>Find Mean</strong> Mesh Height and Standard Deviation.</p> <ul> <li>Typically, it is easier to use and work with the Mesh if it is Mean-Adjusted. You can specify a <code class="highlighter-rouge">C</code> parameter to Correct the Mesh to a 0.00 Mean Height. With a <code class="highlighter-rouge">C</code> parameter this will automatically execute a <code class="highlighter-rouge">G29 P6 C[mean height]</code>.</li> </ul> </li> <li> <code>P6</code>: <p><strong>Shift Mesh</strong> height by the <code class="highlighter-rouge">C</code> value.</p> <ul> <li>The entire Mesh’s height is adjusted by the height specified by the <code class="highlighter-rouge">C</code> parameter. It’s useful to be able to adjust the height of a mesh. It can be used to compensate for a poorly-calibrated probe or other errors. Ideally, you should have the Mesh adjusted for a Mean Height of 0.00 and the Z-Probe measuring 0.0 at the Z homing position.</li> </ul> </li> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;Q&lt;index&gt;&#x5D; </code></td> <td> <p>Test Pattern. Load the specified Test Pattern to check for correct operation. This command is intended for developers and is not required for everyday bed leveling.</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;R&lt;int&gt;&#x5D; </code></td> <td> <p>Repeat count. (Default <code class="highlighter-rouge">GRID_MAX_POINTS_X * GRID_MAX_POINTS_Y</code>).</p> <ul> <li><code class="highlighter-rouge">P3</code> Example: <code class="highlighter-rouge">G29 P3 R4 C0</code> will set the 4 points closest to the nozzle to <code class="highlighter-rouge">0</code>.</li> <li><code class="highlighter-rouge">P4</code> Example: <code class="highlighter-rouge">G29 P4 R3 X80 Y80</code> will allow you to adjust the 3 points closest to X80 Y80.</li> <li>This parameter does not apply to Phase 1! <code class="highlighter-rouge">P1</code> will always attempt to probe the full grid.</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;S&lt;slot&gt;&#x5D; </code></td> <td> <p><strong>Save</strong> the mesh to EEPROM in the given slot.</p> <ul> <li>If no slot number is given, save to the last-activated slot.</li> <li>Use <code class="highlighter-rouge">S-1</code> for G-code output that can be used to restore the mesh anytime.</li> <li>Note that this command also saves the current UBL state (enabled or disabled).</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;T&lt;0&#x7C;1&gt;&#x5D; </code></td> <td> <p><strong>Topology</strong>: Include a Topology Map in the output.</p> <ul> <li>This parameter can be used alone (<code class="highlighter-rouge">G29 T</code>) or in combination with most of the other commands.</li> <li>This option works with all Phase commands (e.g., <code class="highlighter-rouge">G29 P4 R 5 T X 50 Y100 C-0.1 O</code>)</li> <li>A map type can also be specified: <ul> <li><code class="highlighter-rouge">T0</code>: Human-readable (the default)</li> <li><code class="highlighter-rouge">T1</code>: Delimited. Suitable to paste into a spreadsheet to obtain a 3D graph of the mesh.</li> </ul> </li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;U&lt;bool&gt;&#x5D; </code></td> <td> <p><strong>Unlevel</strong>: Probe the outer perimeter to assist bed tramming. (Use with <code class="highlighter-rouge">G29 P1 O</code>)</p> <ul> <li>Only used with <code class="highlighter-rouge">G29 P1 T U</code>. This speeds up the probing of the edge of the bed. This option is useful when the entire bed doesn’t need to be probed because it will be physically adjusted (tramming).</li> </ul> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;V&lt;0&#x7C;1&#x7C;2&#x7C;3&#x7C;4&gt;&#x5D; </code></td> <td> <p>Verbosity Level (0-4)</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;W&lt;bool&gt;&#x5D; </code></td> <td> <p><strong><em>What?</em></strong>: Display valuable UBL data.</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;X&lt;linear&gt;&#x5D; </code></td> <td> <p><strong>X position</strong> for all phases and commands (Default: current X)</p> <ul class="param-desc-list"> </ul> </td> </tr> <tr> <td class="arg"><code> &#x5B;Y&lt;linear&gt;&#x5D; </code></td> <td> <p><strong>Y position</strong> for all phases and commands (Default: current Y)</p> <ul class="param-desc-list"> </ul> </td> </tr> </tbody> </table> </div> </div> <div class="col-lg-12 row related"> <h3>Related codes</h3> <a href="/docs/gcode/M420.html"><code>M420</code></a><a href="/docs/gcode/M421.html"><code>M421</code></a> </div> <div class="col-lg-12 row examples"> <h3>Examples</h3> <p>This is a minimal ‘quick-start’ sequence for set-up and initial probing of a UBL mesh on a machine that includes a display and z-probe</p> <figure class="highlight"><pre><code class="language-gcode" data-lang="gcode">M502          ; Reset settings to configuration defaults...
M500          ; ...and Save to EEPROM. Use this on a new install.
M501          ; Read back in the saved EEPROM.

M190 S65      ; Not required, but having the printer at temperature helps accuracy
M104 S210     ; Not required, but having the printer at temperature helps accuracy

G28           ; Home XYZ.
G29 P1        ; Do automated probing of the bed.
G29 P2 B T    ; Manual probing of locations. USUALLY NOT NEEDED!
G29 P3 T      ; Repeat until all mesh points are filled in.

G29 T         ; View the Z compensation values.
G29 S1        ; Save UBL mesh points to EEPROM.
G29 F 10.0    ; Set Fade Height for correction at 10.0 mm.
G29 A         ; Activate the UBL System.
M500          ; Save current setup. WARNING - UBL will be active at power up, before any G28.
 </code></pre></figure> <p>Use <code class="highlighter-rouge">G26</code> and <code class="highlighter-rouge">G29</code> commands to fine-tune a measured mesh</p> <figure class="highlight"><pre><code class="language-gcode" data-lang="gcode">G26 C P T3.0  ; Produce mesh validation pattern with primed nozzle.
    ; NOTE - PLA temperatures are assumed unless you specify - e.g. - B 105 H 225 for ABS Plastic
G29 P4 T      ; Move nozzle to 'bad' areas and fine tune the values if needed.
    ; Repeat G26 and G29 P4 T  commands as needed.
G29 S1        ; Save UBL mesh values to EEPROM.
M500          ; Resave UBL's state information.
 </code></pre></figure> <p>Use 3-point probe to ‘tilt’ a stored mesh; e.g. in your startup script</p> <figure class="highlight"><pre><code class="language-gcode" data-lang="gcode">G29 L1        ; Load the mesh stored in slot 1 (from G29 S1)
G29 J         ; No size specified on the J option tells G29 to probe the specified 3 points and tilt the mesh according to what it finds.
 </code></pre></figure> </div> </div> </div> </div> </div> </div> <footer> <div class="container"> <div class="row"> <div class="col-lg-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br/> The contents of this website are &copy; 2020 under the terms of the <a href="http://www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-lg-4"> <div class="pull-right"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>